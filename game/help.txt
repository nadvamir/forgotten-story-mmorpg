ИГРОК:

структура его массива:
`id_player` -- уникальное ид игрока
`login` -- логин
`pass` -- пароль в мд5()
`email` -- емайл
`gender` -- пол
`age` -- возраст
`classof` -- класс:
 в0 : без класса
 в1 : воин :
  1а - воин
   1аа - рыцарь
   1аб - палладин
  1б - елфийский воин
   1ба - лунный воин
   1бб - мифический воин
  1в - гном-воин
   1ва - елитный воин
   1вб страх подземелий
 в2 : лучник
  2а - лучник
 в3 : маг
`money` -- деньги
`stats` -- его статы:
 0 - уравень
 1 - експа для уровня
 2 - потолок експы для левел апа
 3 - очки навыка
 4 - експа для опыта
 5 - потолок той експы
 6 - очки опыта
 7 - какое по счету очко опыта имеется
`skillls` -- навыки (ниже)
`rase` -- расса:
 0 
`karma` 
`life` 
`mana` 
`carry` 
`location` 
`last` //
	 0 - poslednij raz dvigalsja,
	 1 - poslednij raz atakoval,
	 2 - poslednij raz regeneriroval
	 3 - poslednij raz kastovali
	 4 - poslednij raz prestom stal
	 5 - vremja kogda regeneracija zaglushit krovotechenie
	 6 - vremja poslednej sfery qedenoj
	 7 - poslednee id chata prochitanogo:
	 8 -
`clan`
`status1` // статус, строковой массив:
	 0 - (0)норм., (1)прест, (2)убийца;
	 1 - (0)холодно, (1)норм, (2)жарко;
	 2 - (0)норм, (1)кровотечение;
	 3 - (0)норм, (1)отравлен;
	 4 - (0)норм, (1)горит;
`qlvl`
`in_battle` 
`admin` 
	-3 полный блок
	-2 блок с форумом
	-1 бан на форуме
	 0 норм
	 1 модер
	 2 админ
`settings` // настройки, внизу указанно номера елемента char
	0 // верхушка, статистика. 1 - полная, 0- сокрашенно
	1 // 1 - локация, 0 - чат
        2 // 1 - переходы полные, 0 - только стороны
        3 // 1 - журнал включен, 0 - выключен
	4 // 1 - описание карты показывать, 0 - нет
        5 // 1 стандартный инвентарь, 2 - 35 мест, 3 - 40, 4 маг 30 -25%, 5 маг 35 - 50%
        6 // 1 - стрелки, 0 - стороны света
	7 // цыфра * 2 = сколько мест доступно для продажи
	8 // 1 - бд включены, 0 - неа
        9 // 1 - инвентарь весь, 0 - вкладками
       10 // 0- wap, 1 - html, 2- web интерфейс
`affected` // эффекты, например оглушен

..

функция get_pl_battle_har ($pl) (i get_npc_battle_har($npc))
возврашяет массив
	0 - очки удара (шанс) (count vs 1)
	1 - очки блока (count vs 0)
	2 - очки уклона (count vs 0)
	3 - очки парирования (count vs 0)
	4 - очки магии (count vs 4)
	5 - очки блок магия (count vs 4)
	6 - очки сопротивления магии (count vs 4)
	7 - очки уклона от магии (count vs 4)
	8 - очки уклона от стрельбы (count vs 0)
	9 - очки парирования стрельбы (count vs 0)


..
подсчет очков (формулы)
очки удара: сила * (навык оружия*3) * (ловкость*2);
процент промаха: 12 - навык оружия
очки уклона: (реакция+ловкость) * (уклон*10)
очки парирования: (реакция+ловкость) * (парирование * 20)
очки блока: реакция * (навык оружия*3) * (ловкость*2);

Формулы подсчета очков опыта
експа для поднятия на следуюший уровень = уровень * уровень * 1000;
($p['stats'][2] = $p['stats'][0] * $p['stats'][0] * 1000;
експа для поднятия очка опыта = (какое по счету очко опыта сейчас + 1) * 23;
($p['stats'][5] = ($p['stats'][7] + 1) * 23;

формула грузоподъемности:
сила * 10 + ловкость * 5
($p['carry'][1] = $p['skills'][0] * 10 + $p['skills'][1] * 5;)

формула жизни
сила * 100;
($p['skills'][0] * 100)

формула маны:
интеллект * 100;
($p['skills'][2] * 100)

КЛАНЫ:
1 новичек
2 рядовой
3 звеневой
4 почетный воин
5 командир
6 Капитан
7 Лорд
Навыки:
0-Сила
1-Ловкость
2-Интеллект
3-Реакция
..
4-медитация
5-регенерация
6-целительство
..
7-Мечи
8-Топоры
9-Молоты
10-Копья
11-Луки
12-Арбалеты
13-Ножи
14-Клинки
15-Древковое оружие
16-Магическое .. Позволяет использовать заколдованное оружие, но нужен навык и того оружия
..
17-Уклон
18-Парирование
19-Маг. Уклон
20-Маг. Парирование
21-Маг. Сопротивление
22-Магия Огня
23-Магия Воды
24-Магия Земли
25-Магия Воздуха
26-Магия Иллюзии
27-Подземная магия
28-Элфийская магия природы
29-Древнеельфийская магия Могущественных
..
30-Архимагия
31-Рыбак
32-Алхимик
33-Рудокоп
34-Кузнец
35-Лесоруб
36-Плотник
37-Повар
38-Скрытность
39-Ювелир
40-Двуручный
41-Оружие и нож
42-Скорняк
43-
44-
45-
..
..
..

Локации:

значения массива возвращаемого функцией loc('near'):
буквой ф то, что надо в файле указать
 $r[0] = инфа о етой локации (на которой стоишь)
 направление перехода указывается при изпользовании уже в майн.пхп
 по принцыпу ниже:
   12345678 = сз с св з в юз ю юв
 массив второго уровня:
ф	0 полный код локации (lkkh|2x6)
ф	1 название (в лесу)
ф	2 название перехода на нее (в лес)
ф	3 температура (надо в файле самом писать, -1 или 0 или 1)
ф	4 переходы цыфрами (246 - с з в)
ф	5 название замка
ф	6 tile
ф	7 переходы в другую карту
..
структура базы данных локации:

fullname - полное название
region - регион, в котором лока, первая часть фулнейма
inloc - что в ней

заготовка для файла:
             0     1          2               3           4         5           6           7
  $l[''] = 'код~название~переход наз.~'.$temperature.'~переходы~название замка~тип~переходы на другую карту';

Объяснение маневра в функции loc
.. $r[$r[0][4][$i]] = explode ('|', $l[$a[$r[0][4][$i]]]);
в масив окружаюших локаций ($r[]) записывается локация из файла
она разбивается на части функцией explode ()
указываемая локация зависит от записаного перехода в $r[0][4][какойто по очереди символ]
название такой локации написано в массиве $a
которое и указывается массиву $l;

в картах схема actions
вещь или нпц|fullname|время когда восстановить - создать (~);

хандлер в локациях по установке температуры:
  $locmap = '';
  $w = do_mysql ("SELECT weather FROM maps WHERE map = '".$locmap."';");
  $w = mysql_result ($w, 0);
  if ($w == 0 || $w == 1 || $w == 0.5) $temperature = -1;
  if ($w == 2 || $w == 3 || $w == 4 || $w == 5) $temperature = 0;
  if ($w == 6) $temperature = 1;


в картах погода - 
0 - сухой мороз
0.5 - морозик
1 - снег
2 - дождь
3 - туман
4 - ветер
5 - тихая погода
6 - жара
.....
ВЕШИ

классы:
w - оружие // on_take (sila, lovka, intellekt, reakcija, navyk) // on_drop -эффекты
 swo - мечи, навык 7
 axe - топоры, навык 8
 ham - молоты, навык 9
 spe - копья, навык 10
 bow - луки, навык 11
 arb - арбалеты, навык 12
 kni - ножи, навык 13
 kli - клинки, навык 14
 tre - древковое оружие, навык 15 // on_use (procent uspeshnoj magii, kakaja magija [0 - vse, dalee po ocheredi]~skolqko proc pljus
  tre - древковое
  wan - жезл
q - квестовое
 que
 hun - трофей
a - броня on_take (sila, lovka, intellekt, reakcija)
 hea - шлем
 bo1 - броня
 bo2 - рубахи
 sho - наплечники
 glo - перчатки
 bel - пояс
 leg - штаны
 pon - поножи
 bot - ботинки
 amu - амулет // on_use (sila, lovka, intellekt, reakcija) +
 rin - кольцо // on_use (sila, lovka, intellekt, reakcija) +
f - еда // on_use life+~mana+~krovotechenie-~jad-~ogonq-
 foo - по правилам чтото писать надо
 tra - травы (on_take название, name всегда "трава"
 dri - напитки
  alc - алкогольные
  nor - нормальные
s - свитки action=cast&spell=spell&type=scroll // on_take nazvanie originalqnogo zakla
 scr
b - книги ( в онюз перечислить какие заклы входят, кастуется как свиток, но остается, action=castbook; action=cast&spell=spell&type=book // on_take spisok zaklinanij v nutri
 sum - призывная
 sim - обыкновенная
//r - руна, заговаривается архимагией, только для одного человека, указаное число пользований
о - стояшяя вещь
 sta
m - мелкая, которую хранить в большом количестве можно // on_take (количество);
 rea - реагенты
 arr - стрелы
x - щит
 shi - щит
l - светяшиеся
 fir - on_take (on/off) включен иль нет

// урон и броня
	0 - режущий
	1 - колющий
	2 - дробяший
	3 - рубящий 
        4 - магический

// заготовка вешей
  //          0      1      2      3      4      5       6    7    8      9       10      11   12
  $it[''] = 'name|fullname|type|on_take|on_use|on_drop|price|dmg|armor|belongs|location|weight';

IS_IN:
	ARMOR:
	a0 - shlem
	a1 - dospeh
	a2 - rubaha
	a3 - naplechniki
	a4 - pechatki
	a5 - pojas
	a6 - shtany
	a7 - ponozhi
	a8 - botinki
	a9 - amulet
	a10 - kolqco
	WEAPON:
	wea - osnovnoj
	wst - na pojase
	INVENTORY:
	inv
	MBOOK
	mbk
	SHIELD
	shi
	BANK
	ban
	HEALING
        hea
        POTION ON BELT
        pot
	

dragon gem = +damage
phoenix gem = +Mdamage
rainbow gem = +EXP
turtoise gem = +Defence
violet gem = +Weapon exp
moon gem = +Magic exp
Kylin gem = +Durability



......
НПЦ:

типы
 s - разговаривающий
 a - добрый
 x - враждебный
 t - продавец
структура файла
  в файле массив:
$npc['name'] = ''; // имя
$npc['fullname'] = ''; //код
$npc['type'] = ''; // тип \ класс
$npc['life'] = '|'; // жизни
// location netu, ee nado sozdatq
  $npc['move'] = ''; // как часто движется
$npc['dmg'] = ''; // урон
$npc['armor'] = ''; // броня
$npc['exp'] = ''; // опыт
$npc['chanse'] = ''; // шанс успешного удара - блока 
$npc['drop2'] = ''; // дроп, лут
$npc['hunt'] = ''; // трофеи
$npc['map'] = ''; // регион
$npc['belongs'] = ''; // хозяин
$npc['attack_speed'] = '4'; // скорость нападения
// У торговцев в дроп пишутся товары. напасть на них нелзя
// Но по началу просто случайным образом туда кидаются товары из файлов (t_n_t_fullname.php);
$npc['drop'][0] = типы тех вешей, что можно продать
$npc['drop'][1] = коефициент на покупку (u nego)
$npc['drop'][2] = коэфициент на продажу

заготовка: 
  $npc['name'] = '';
  $npc['fullname'] = '';
  $npc['type'] = '';
  $npc['life'] = '|';
  $npc['move'] = '';
  $npc['dmg'] = '';
  $npc['armor'] = '';
  $npc['exp'] = '';
  $npc['chanse'] = '';
  $npc['drop2'] = '';
  $npc['hunt'] = '';
  $npc['map'] = '';
  $npc['belongs'] = '';
  $npc['attack_speed'] = '4';



КВЕСТЫ:
  многоразывые повторяюшиесь случайно:
	появляются на любом разговариваюшем нпц в регионе
	если есть, то при начале разговора игрок задает вопрос "ненадо ли помочь"
        тогда загружается с файла разговор, где все проверяется, объясняется...
        когда игра думает что квестов мало, то она создает дополнительные квесты
        база - 
`id_quest` ид квеста
`questname` название
`npc` нпц которому принадлежит
`region` регион, в котором его надо дать для нпц
	если настало время проверить квесты, 
	вызывается функция gen_quest();
	если у нпц есть квест, во время разговора подключается его файл как продолжение файла разговора




МАГИЯ

`fullname` TINYTEXT NOT NULL ,
`name` LONGBLOB NOT NULL ,
`classof` TINYTEXT NOT NULL ,
`type` TINYTEXT NOT NULL ,
`dmgmin` INT( 4 ) NULL ,
`dmgmax` INT( 4 ) NULL ,
`lplus` INT( 4 ) NULL ,
`cname` TINYTEXT NULL ,
`effect` TINYTEXT NULL ,
`blood` INT( 1 ) NULL ,
`fire` INT( 1 ) NULL ,
`poison` INT( 1 ) NULL ,
`words` TINYTEXT NULL ,
`mana` INT( 4 ) NULL ,
`minskill` INT( 2 ) NULL ,
`difficulty` INT( 4 ) NULL ,
`reagents` TINYTEXT NULL,
`timewait` INT( 10 ) NULL

заготовка--

INSERT INTO magic VALUES ('код', 'название', 'класс', 'тип', 'мин урон', 'макс урон', 'жизнь+', 'что создает', 'еффект', 'кровь', 'огонь', 'яд', 'слова', 'мана', 'мин навык', 'сложность', 'реагенты', 'вреия ожидания');

Еффекты:
- бывают несколько типов:
1) обшее улучшение/ухудшение скорости. (в константах применять)
2) ухудшение - улутшение скорости атаки (в последний ьраз нападал)
3) ухудшение -  улутшение скорости магии - в последний раз кастовал


Приемы -
файл приема помимо акихто специальных действий содержит следуюшие переменные -
$EFFECT = ''; // эффект, каторый нанести
$DMG = 1.00; // насколько умножить урон
$DMGP = 0.05; // сколько добавляется с новым уровнем
$HEAL = 300; // skolqko izlechivaet
$HEALP = 100; // сколько придавляется с новым уровнем
$MANA = 50; // указывает сколько маны требует заклинание
$MANAP = 15; // сколько маны увеличивается со следуешим уровнем

записывается так-
kombo:lvl:pts|kombo:lvl:pts...


// спец вещи
  // удочка
  $it['i.w.tre.1h.lvl1_udochka'] = 'удочка|i.w.tre.1h.lvl1_udochka|w|0~1~1~1~0|0~0|0|20|0-0~0-0~10-11~0-0~0-0|0|0|0|1';
